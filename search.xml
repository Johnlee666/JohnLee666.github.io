<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
    
    <entry>
      <title><![CDATA[iOS开发中页面间传值方法总结]]></title>
      <url>zhanlee.com/2016/06/23/iOS%E5%BC%80%E5%8F%91%E4%B8%AD%E9%A1%B5%E9%9D%A2%E9%97%B4%E4%BC%A0%E5%80%BC%E6%96%B9%E6%B3%95%E6%80%BB%E7%BB%93/</url>
      <content type="html"><![CDATA[<h1 id="iOS页面间传值的方法"><a href="#iOS页面间传值的方法" class="headerlink" title="iOS页面间传值的方法"></a>iOS页面间传值的方法</h1><p>在iOS中页面间传值一般有以下几种方法:</p>
<ol>
<li>属性传值</li>
<li>代理传值</li>
<li>blcok传值</li>
<li>NSNotification</li>
<li>NSUserDefaults</li>
<li>单例传值</li>
</ol>
<p>可能还有一些其他的方法,这里不再进行详细介绍。这六种方式各有特点，不同的情况下可使用不同的方式，下面我们来看下详细的使用方法。<br> <a id="more"></a></p>
<h2 id="一-属性传值"><a href="#一-属性传值" class="headerlink" title="一. 属性传值"></a>一. 属性传值</h2><p>属性传值一般适用于将值从前一视图向后一视图传递。而属性传值的代码也非常简单，先在第二个视图类中声明一个属性：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#import &lt;UIKit/UIKit.h&gt;</span><br><span class="line">interface SecondViewController : UIViewController</span><br><span class="line">property NSString *string;</span><br><span class="line">@end</span><br></pre></td></tr></table></figure></p>
<p>然后在第一个视图的实现类中进行传值操作：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-(void)passData&#123;</span><br><span class="line">SecondViewController *secondVC = [[SecondViewController alloc]init];</span><br><span class="line">secondVC.string = self.textField.text;</span><br><span class="line">[self.navigationController pushViewController:second animated:YES];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="二-代理传值"><a href="#二-代理传值" class="headerlink" title="二. 代理传值"></a>二. 代理传值</h2><p>代理模式是一种简单的设计模式，在iOS开发中可通过协议来实现<br>使用代理既可以用于正向也可以用于反向传值，下面以反向传值为例。<br>首先在第二个页面的类中声明协议，以及一个id类型的delegate属性。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#import &lt;UIKit/UIKit.h&gt;</span><br><span class="line">@protocol backProtocol &lt;NSObject&gt;</span><br><span class="line">-(void) backPass:(NSString *)string;</span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@interface SecondViewController : UIViewController</span><br><span class="line">@property id &lt;backProtocol&gt; delegate;</span><br><span class="line">@end</span><br></pre></td></tr></table></figure></p>
<p>之后在实现文件中调用代理方法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if ([self.delegate respondsToSelector:@selector(backPass:)])</span><br><span class="line">&#123;</span><br><span class="line">[self.delegate backPass:self.textField.text];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>最后在第一个页面中声明遵守这一协议，并将自己设为代理，然后实现这一协议中的方法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">secondVC.delegate = self;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-(void)backPass:(NSString *)string&#123;</span><br><span class="line">self.textField.text = string;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样简单的代理就完成了，它实现了将第二个页面中textField的值传入第一个页面的textField中。如果想更深入的了解代理模式，请<a href="http://www.cocoachina.com/ios/20160317/15696.html" target="_blank" rel="external">戳这里</a></p>
<h2 id="三-block传值"><a href="#三-block传值" class="headerlink" title="三. block传值"></a>三. block传值</h2><p>block本质上和其他变量类似，只不过block中存储的数据是一个函数体，你可以把它想象成是一个指向函数的指针，但其实这两者也有许多不同。如果想深入了解block语法的内容，可以看下<a href="http://www.devtalking.com/articles/you-should-know-block/" target="_blank" rel="external">这篇文章</a>。<br>现在介绍简单的反向传值。首先在第二个类中声明block属性<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#import &lt;UIKit/UIKit.h&gt;</span><br><span class="line">typedef void(^passValueBlock)(NSString *blockString);</span><br><span class="line">@interface SecondViewController : UIViewController</span><br><span class="line">@property(nonatomic,copy) passValueBlock block;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure></p>
<p>然后在实现文件中传值<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">self.block(self.textField.text);</span><br></pre></td></tr></table></figure></p>
<p>最后在第一个页面中实现block方法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">secondVC.block = ^(NSString *string)&#123;</span><br><span class="line">self.textField.text = string;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>这样就实现了将第二个页面的textField的值传入第一个页面的textField中。</p>
<h2 id="四-NSNotification传值"><a href="#四-NSNotification传值" class="headerlink" title="四. NSNotification传值"></a>四. NSNotification传值</h2><p>NSNotification其实就是在iOS中对观察者模式的一种实现。而通过NSNotification传值则非常简单。<br>首先就是在需要传值的类中发送通知<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[NSNotificationCenter defaultCenter]postNotificationName:@&quot;passData&quot; object:self.textField.text];</span><br></pre></td></tr></table></figure></p>
<p>然后在其他类中添加观察者并实现方法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(passData:) name:@&quot;passData&quot; object:nil];</span><br><span class="line"></span><br><span class="line">-(void)passData:(NSNotification *)data&#123;</span><br><span class="line">self.textField.text = data.object;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>最后不要忘了在dealloc方法中撤销通知中心，以免资源的浪费<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-(void)dealloc&#123;</span><br><span class="line">[[NSNotificationCenter defaultCenter] removeObserver:self];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="五-NSUserDefaults"><a href="#五-NSUserDefaults" class="headerlink" title="五. NSUserDefaults"></a>五. NSUserDefaults</h2><p>NSUserDefaults在iOS开发中主要用于存储轻量数据，用于数据持久化。但是也可以用它进行页面间的传值<br>首先在一个界面中进行存储操作<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];</span><br><span class="line">[defaults setObject:self.textField.text forKey:@&quot;string&quot;];</span><br></pre></td></tr></table></figure></p>
<p>然后在另一个页面中进行读取操作<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];</span><br><span class="line">self.textField.text = [defaults objectForKey:@&quot;string&quot;];</span><br></pre></td></tr></table></figure></p>
<p>关于NSUserDefaults的更多内容，请点击<a href="http://www.jianshu.com/p/459c15cf6ce2" target="_blank" rel="external">这里</a></p>
<h2 id="六-单例传值"><a href="#六-单例传值" class="headerlink" title="六. 单例传值"></a>六. 单例传值</h2><p>首先新建一个单例类<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#import &lt;Foundation/Foundation.h&gt;</span><br><span class="line"></span><br><span class="line">@interface DataManager : NSObject</span><br><span class="line">+(instancetype)Default;</span><br><span class="line">@property(nonatomic,strong) NSString *string;</span><br><span class="line">@end</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#import &quot;DataManager.h&quot;</span><br><span class="line">static DataManager *manger = nil;</span><br><span class="line">@implementation DataManager</span><br><span class="line">+(instancetype)Default&#123;</span><br><span class="line">static dispatch_once_t onceToken;</span><br><span class="line">dispatch_once(&amp;onceToken,^&#123;</span><br><span class="line">manger = [[DataManager alloc]init];</span><br><span class="line">&#125;);</span><br><span class="line">return manger;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<p>然后便可通过属性string进行传值<br>先在一个页面中将值传入单例manager中<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DataManager *manager = [DataManager Default];</span><br><span class="line">manager.string = self.textField.text;</span><br></pre></td></tr></table></figure></p>
<p>再在另一个页面通过它传给其他对象<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DataManager *manager = [DataManager Default];</span><br><span class="line">self.textField.text = manager.string;</span><br></pre></td></tr></table></figure></p>
<h1 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h1><p><del>真是越到期末我越浪。在期末考前还在写博客，也真是作死呀。</del> 不过通过这第一次写技术博客的经历，感觉对知识又有了更深入的理解，并且能把自己的笔记分享出来，感觉也是非常的棒。当然笔记中难免有许多错误，也烦请读者不吝指出。最后，要赶紧滚去复习了，逃~</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[纪念第一次博客搭建]]></title>
      <url>zhanlee.com/2016/06/09/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/</url>
      <content type="html"><![CDATA[<p>折腾了一天，总算把博客搭建完成了。希望以后能在这多写点东西，记录下自己的成长历程<br>。也希望我的分享可以带给大家一些有用的东西。<br> <a id="more"></a><br>谨以此文纪念在异乡的第一个端午。</p>
]]></content>
    </entry>
    
  
  
</search>
